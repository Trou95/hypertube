import { Repository } from 'typeorm';
import { MoviesService } from '../movies/movies.service';
import { Download } from '../streaming/entities/download.entity';
import { WatchHistory } from '../users/entities/watch-history.entity';
export declare class WatchService {
    private readonly moviesService;
    private downloadRepository;
    private watchHistoryRepository;
    constructor(moviesService: MoviesService, downloadRepository: Repository<Download>, watchHistoryRepository: Repository<WatchHistory>);
    getMovieForWatch(imdbId: string, userId: number): Promise<{
        downloadProgress: number;
        isDownloading: boolean;
        isDownloaded: boolean;
        canStream: boolean;
        watched: any;
        watchProgress: any;
        lastWatchedAt: any;
        id: any;
        imdbId: any;
        title: any;
        year: number;
        releaseDate: any;
        runtime: any;
        poster: any;
        rating: number;
        imdbRating: number;
        metascore: number;
        overview: any;
        plot: any;
        genre: any;
        director: any;
        writer: any;
        actors: any;
        language: any;
        country: any;
        awards: any;
        boxOffice: any;
        production: any;
        website: any;
        isStreaming: boolean;
    }>;
    startStreaming(imdbId: string, userId: number, startTime?: number): Promise<{
        status: string;
        imdbId: string;
        userId: number;
        startTime: number;
        timestamp: string;
    }>;
    stopStreaming(imdbId: string, userId: number, currentTime: number, completed: boolean): Promise<{
        status: string;
        imdbId: string;
        userId: number;
        currentTime: number;
        completed: boolean;
        timestamp: string;
    }>;
    private checkDownloadStatus;
    private triggerAutomaticDownload;
    private simulateDownloadProgress;
    private getUserWatchStatus;
    private updateWatchStatus;
}
